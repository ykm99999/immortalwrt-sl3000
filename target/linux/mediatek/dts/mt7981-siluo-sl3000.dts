/dts-v1/;

#include "mt7981.dtsi"

/ {
    model = "Siluo SL-3000";
    compatible = "siluo,sl3000", "mediatek,mt7981";

    chosen {
        bootargs = "console=ttyS0,115200n8";
    };

    /* 1GB DDR4 内存 */
    memory {
        reg = <0x40000000 0x40000000>; /* 1GB = 0x40000000 */
    };

    aliases {
        led-boot = &led_status;
        led-failsafe = &led_status;
        led-running = &led_status;
        led-upgrade = &led_status;
        ethernet0 = &gmac0;
    };

    leds {
        compatible = "gpio-leds";

        led_status: status {
            label = "sl3000:green:status";
            gpios = <&pio 12 GPIO_ACTIVE_HIGH>;
        };

        wan_led: wan {
            label = "sl3000:blue:wan";
            gpios = <&pio 13 GPIO_ACTIVE_HIGH>;
        };

        wifi_led: wifi {
            label = "sl3000:green:wifi";
            gpios = <&pio 14 GPIO_ACTIVE_HIGH>;
        };
    };

    keys {
        compatible = "gpio-keys";

        reset {
            label = "reset";
            gpios = <&pio 15 GPIO_ACTIVE_LOW>;
            linux,code = <KEY_RESTART>;
        };

        wps {
            label = "wps";
            gpios = <&pio 16 GPIO_ACTIVE_LOW>;
            linux,code = <KEY_WPS_BUTTON>;
        };
    };
};

/* 千兆以太网 */
&gmac0 {
    status = "okay";
    phy-mode = "sgmii";
    fixed-link {
        speed = <1000>;
        full-duplex;
    };
};

/* WiFi6 AX3000 */
&wifi {
    status = "okay";
};

/* eMMC 存储 */
&mmc0 {
    status = "okay";
    bus-width = <8>;
    non-removable;
    cap-mmc-highspeed;
    cap-mmc-hs200;
    cap-mmc-hs400;
    mmc-hs400-1_8v;
    vmmc-supply = <&mt7981_regulator>;
    vqmmc-supply = <&mt7981_regulator>;

    /* 分区定义，根据实际需求调整 */
    partitions {
        compatible = "fixed-partitions";
        #address-cells = <1>;
        #size-cells = <1>;

        partition@0 {
            label = "bootloader";
            reg = <0x00000000 0x02000000>; /* 32MB */
            read-only;
        };

        partition@2000000 {
            label = "firmware";
            reg = <0x02000000 0x70000000>; /* 1792MB */
        };

        partition@72000000 {
            label = "userdata";
            reg = <0x72000000 0x06000000>; /* 96MB */
        };
    };
};
