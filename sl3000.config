- name: 生成 .config
  run: |
    cd immortalwrt
    cat > .config << 'EOF'
    CONFIG_TARGET_mediatek=y
    CONFIG_TARGET_mediatek_mt7981=y
    CONFIG_TARGET_mediatek_mt7981_DEVICE_siluo_sl3000=y

    CONFIG_TARGET_ROOTFS_SQUASHFS=y
    CONFIG_TARGET_IMAGES_GZIP=y

    CONFIG_PACKAGE_curl=y
    CONFIG_PACKAGE_wget=y
    CONFIG_PACKAGE_tcpdump=y
    CONFIG_PACKAGE_ipset=y
    CONFIG_PACKAGE_htop=y
    CONFIG_PACKAGE_bash=y
    CONFIG_PACKAGE_nano=y

    CONFIG_PACKAGE_luci=y
    CONFIG_PACKAGE_luci-compat=y
    CONFIG_PACKAGE_luci-base=y
    CONFIG_PACKAGE_luci-mod-admin-full=y
    CONFIG_PACKAGE_luci-theme-bootstrap=y

    CONFIG_PACKAGE_luci-app-firewall=y
    CONFIG_PACKAGE_luci-app-upnp=y
    CONFIG_PACKAGE_luci-app-sqm=y
    CONFIG_PACKAGE_luci-app-ddns=y

    CONFIG_PACKAGE_dockerd=y
    CONFIG_PACKAGE_docker-ce=y
    CONFIG_PACKAGE_docker-cli=y
    CONFIG_PACKAGE_luci-app-dockerman=y

    CONFIG_PACKAGE_kmod-veth=y
    CONFIG_PACKAGE_kmod-bridge=y
    CONFIG_PACKAGE_kmod-xt-overlay=y
    CONFIG_PACKAGE_kmod-nf-nat=y
    CONFIG_PACKAGE_kmod-nf-conntrack=y

    CONFIG_PACKAGE_sl3000-logo=y
    EOF

    ./scripts/diffconfig.sh || true
