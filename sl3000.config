#
# Automatically generated file; DO NOT EDIT.
# ImmortalWrt Configuration - 司洛 SL-3000 EMMC 优化版 - 完整PassWall2版
#

# ===== 基础系统配置 =====
CONFIG_MODULES=y
CONFIG_HAVE_DOT_CONFIG=y
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_mt7981=y
CONFIG_TARGET_mediatek_mt7981_DEVICE_sl_3000-emmc=y
CONFIG_TARGET_BOARD="mediatek"
CONFIG_TARGET_SUBTARGET="mt7981"
CONFIG_TARGET_PROFILE="DEVICE_sl_3000-emmc"
CONFIG_TARGET_ARCH_PACKAGES="aarch64_cortex-a53"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-Os -pipe -mcpu=cortex-a53 -mtune=cortex-a53"
CONFIG_CPU_TYPE="cortex-a53"
CONFIG_LINUX_5_4=y

# ===== 镜像配置优化 =====
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256
CONFIG_TARGET_ROOTFS_PARTSIZE=512
CONFIG_TARGET_ROOTFS_TARGZ=y
# CONFIG_TARGET_ROOTFS_INITRAMFS=n

# ===== 全局构建设置优化 =====
CONFIG_JSON_OVERVIEW_IMAGE_INFO=y
CONFIG_SIGNED_PACKAGES=y
CONFIG_DOWNLOAD_CHECK_CERTIFICATE=y
CONFIG_DEVEL=y

# 启用CCache加速编译
CONFIG_CCACHE=y
CONFIG_CCACHE_DIR=""

# 内核构建优化
CONFIG_KERNEL_BUILD_USER="SL3000-User"
CONFIG_KERNEL_BUILD_DOMAIN="local"
CONFIG_KERNEL_FRAME_WARN=1024
CONFIG_KERNEL_CGROUPS=y
CONFIG_KERNEL_NAMESPACES=y
CONFIG_KERNEL_USER_NS=y
CONFIG_KERNEL_SECCOMP=y
CONFIG_KERNEL_IPV6=y
CONFIG_KERNEL_CC_OPTIMIZE_FOR_PERFORMANCE=y

# 禁用调试信息
CONFIG_KERNEL_DEBUG_INFO=n
CONFIG_KERNEL_DEBUG_KERNEL=n
CONFIG_KERNEL_DEBUG_FS=n

# 内核安全增强
CONFIG_KERNEL_SECCOMP_FILTER=y
CONFIG_KERNEL_STACKPROTECTOR_STRONG=y
CONFIG_KERNEL_SLAB_FREELIST_HARDENED=y
CONFIG_KERNEL_SLAB_FREELIST_RANDOM=y
CONFIG_KERNEL_KALLSYMS=n
CONFIG_KERNEL_PROFILING=n

# Docker必需内核选项
CONFIG_KERNEL_CGROUP_DEVICE=y
CONFIG_KERNEL_CGROUP_FREEZER=y
CONFIG_KERNEL_CGROUP_PIDS=y
CONFIG_KERNEL_CGROUP_BPF=y
CONFIG_KERNEL_MEMCG=y
CONFIG_KERNEL_NET_CLS_CGROUP=y
CONFIG_KERNEL_BLK_CGROUP=y
CONFIG_KERNEL_FHANDLE=y
CONFIG_KERNEL_FANOTIFY=y
CONFIG_KERNEL_POSIX_MQUEUE=y

# 包构建优化
CONFIG_MOLD=y
CONFIG_IPV6=y

# 安全加固
CONFIG_PKG_ASLR_PIE_REGULAR=y
CONFIG_PKG_CC_STACKPROTECTOR_REGULAR=y
CONFIG_PKG_FORTIFY_SOURCE_2=y
CONFIG_PKG_RELRO_FULL=y

# 工具链优化
CONFIG_BINUTILS_USE_VERSION_2_42=y
CONFIG_GCC_USE_VERSION_13=y
CONFIG_LIBC_USE_MUSL=y
CONFIG_USE_MUSL=y
CONFIG_EXTRA_OPTIMIZATION="-fno-caller-saves -fno-plt -fno-strict-aliasing"

# ===== 默认包选择优化 =====
CONFIG_DEFAULT_autocore-arm=y
CONFIG_DEFAULT_base-files=y
CONFIG_DEFAULT_ca-bundle=y
CONFIG_DEFAULT_ca-certificates=y
CONFIG_DEFAULT_default-settings-chn=y
CONFIG_DEFAULT_dnsmasq-full=y
CONFIG_DEFAULT_dropbear=y
CONFIG_DEFAULT_firewall=y
CONFIG_DEFAULT_firewall4=y
CONFIG_DEFAULT_fstools=y
CONFIG_DEFAULT_kmod-gpio-button-hotplug=y
CONFIG_DEFAULT_kmod-leds-gpio=y
CONFIG_DEFAULT_kmod-mmc=y
CONFIG_DEFAULT_kmod-nf-nathelper=y
CONFIG_DEFAULT_kmod-nft-offload=y
CONFIG_DEFAULT_libc=y
CONFIG_DEFAULT_libgcc=y
CONFIG_DEFAULT_libustream-openssl=y
CONFIG_DEFAULT_logd=y
CONFIG_DEFAULT_mtk-smp=y
CONFIG_DEFAULT_netifd=y
CONFIG_DEFAULT_nftables=y
CONFIG_DEFAULT_odhcp6c=y
CONFIG_DEFAULT_odhcpd-ipv6only=y
CONFIG_DEFAULT_ppp=y
CONFIG_DEFAULT_ppp-mod-pppoe=y
CONFIG_DEFAULT_procd-ujail=y
CONFIG_DEFAULT_uboot-envtool=y
CONFIG_DEFAULT_uci=y
CONFIG_DEFAULT_uclient-fetch=y
CONFIG_DEFAULT_urandom-seed=y
CONFIG_DEFAULT_urngd=y

# Dropbear安全优化
CONFIG_DROPBEAR_ASKPASS=n
CONFIG_DROPBEAR_DISABLE_REVERSEDNS=y

# ===== PassWall2 完整包配置 =====
CONFIG_PACKAGE_luci-app-passwall2=y
CONFIG_PACKAGE_luci-i18n-passwall2-zh-cn=y

# PassWall2 GUI依赖
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-ipkg=y

# 核心代理协议
CONFIG_PACKAGE_shadowsocks-libev-ss-local=y
CONFIG_PACKAGE_shadowsocks-libev-ss-redir=y
CONFIG_PACKAGE_shadowsocks-libev-ss-server=y
CONFIG_PACKAGE_shadowsocks-libev-ss-rules=y
CONFIG_PACKAGE_shadowsocks-libev-ss-tunnel=y

# Shadowsocks Rust (性能更好)
CONFIG_PACKAGE_shadowsocks-rust-sslocal=y
CONFIG_PACKAGE_shadowsocks-rust-ssserver=y
CONFIG_PACKAGE_shadowsocks-rust-ssurl=y
CONFIG_PACKAGE_shadowsocks-rust-ssmanager=y

# V2Ray/Xray 核心
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_xray-plugin=y
CONFIG_PACKAGE_v2ray-geoip=y
CONFIG_PACKAGE_v2ray-geosite=y

# Trojan 系列
CONFIG_PACKAGE_trojan=y
CONFIG_PACKAGE_trojan-plus=y
CONFIG_PACKAGE_trojan-go=y

# 新兴协议
CONFIG_PACKAGE_naiveproxy=y
CONFIG_PACKAGE_hysteria=y
CONFIG_PACKAGE_tuic-client=y
CONFIG_PACKAGE_tuic-server=y

# 简单协议
CONFIG_PACKAGE_simple-obfs=y
CONFIG_PACKAGE_simple-obfs-server=y

# Brook 协议
CONFIG_PACKAGE_brook=y
CONFIG_PACKAGE_brook-server=y

# DNS 相关组件
CONFIG_PACKAGE_chinadns-ng=y
CONFIG_PACKAGE_dns2socks=y
CONFIG_PACKAGE_dns2tcp=y
CONFIG_PACKAGE_microsocks=y
CONFIG_PACKAGE_ipt2socks=y
CONFIG_PACKAGE_redsocks2=y

# 智能DNS和分流域名
CONFIG_PACKAGE_dnsproxy=y
CONFIG_PACKAGE_mosdns=y
CONFIG_PACKAGE_v2raya=y

# 透明代理支持
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y
CONFIG_PACKAGE_iptables-mod-ipopt=y
CONFIG_PACKAGE_iptables-mod-socket=y
CONFIG_PACKAGE_iptables-mod-tproxy=y

# ===== Docker 支持 (可选) =====
CONFIG_PACKAGE_docker=y
CONFIG_PACKAGE_dockerd=y
CONFIG_PACKAGE_docker-compose=y
CONFIG_PACKAGE_containerd=y
CONFIG_PACKAGE_runc=y
CONFIG_PACKAGE_tini=y
CONFIG_PACKAGE_libnetwork=y

# Docker 存储驱动
CONFIG_PACKAGE_kmod-fs-btrfs=y
CONFIG_PACKAGE_kmod-fs-overlayfs=y
CONFIG_PACKAGE_kmod-dm=y
CONFIG_PACKAGE_kmod-dm-thin-pool=y
CONFIG_PACKAGE_kmod-dax=y
CONFIG_PACKAGE_kmod-br-netfilter=y
CONFIG_PACKAGE_kmod-veth=y
CONFIG_PACKAGE_kmod-ikconfig=y

# ===== 内核模块优化 =====
# 文件系统（EMMC专用）
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-f2fs=y
CONFIG_PACKAGE_kmod-fs-squashfs=y

# 网络核心
CONFIG_PACKAGE_kmod-ip6tables=y
CONFIG_PACKAGE_kmod-ipt-conntrack=y
CONFIG_PACKAGE_kmod-ipt-core=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-ipt-offload=y
CONFIG_PACKAGE_kmod-nf-conntrack=y
CONFIG_PACKAGE_kmod-nf-nat=y
CONFIG_PACKAGE_kmod-nft-core=y
CONFIG_PACKAGE_kmod-nft-offload=y

# 网络优化
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_PACKAGE_kmod-ifb=y
CONFIG_PACKAGE_kmod-macvlan=y
CONFIG_PACKAGE_kmod-sched-cake=y
CONFIG_PACKAGE_kmod-sched-bpf=y

# MTK 硬件加速
CONFIG_PACKAGE_kmod-mediatek_hnat=y
CONFIG_PACKAGE_kmod-mt_wifi=y

# ===== LuCI 配置优化 =====
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-light=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-theme-argon=y

# 其他实用LuCI应用
CONFIG_PACKAGE_luci-app-turboacc-mtk=y
CONFIG_PACKAGE_luci-app-upnp=y

# ===== 库文件优化 =====
CONFIG_PACKAGE_libatomic=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_libpthread=y
CONFIG_PACKAGE_librt=y
CONFIG_PACKAGE_libstdcpp=y

# 网络库
CONFIG_PACKAGE_libopenssl=y
CONFIG_OPENSSL_OPTIMIZE_SPEED=y
CONFIG_OPENSSL_WITH_ASM=y
CONFIG_OPENSSL_WITH_TLS13=y

CONFIG_PACKAGE_libpcap=y
CONFIG_PACKAGE_libubox=y
CONFIG_PACKAGE_libubus=y
CONFIG_PACKAGE_libuci=y
CONFIG_PACKAGE_libuclient=y
CONFIG_PACKAGE_libustream-openssl=y
CONFIG_PACKAGE_zlib=y

# PassWall2 依赖库
CONFIG_PACKAGE_libevent2=y
CONFIG_PACKAGE_libevent2-core=y
CONFIG_PACKAGE_libevent2-extra=y
CONFIG_PACKAGE_libevent2-openssl=y
CONFIG_PACKAGE_libevent2-pthreads=y

# ===== 系统工具优化 =====
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_ethtool=y
CONFIG_PACKAGE_iw=y

# 网络诊断工具
CONFIG_PACKAGE_bmon=y
CONFIG_PACKAGE_iftop=y
CONFIG_PACKAGE_mtr=y
CONFIG_PACKAGE_traceroute=y

# 系统监控
CONFIG_PACKAGE_lm-sensors=y
CONFIG_PACKAGE_irqbalance=y

# 存储工具
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_resize2fs=y
CONFIG_PACKAGE_fdisk=y

# ===== 硬件特性支持 =====
CONFIG_HAS_FPU=y
CONFIG_GPIO_SUPPORT=y
CONFIG_EMMC_SUPPORT=y
CONFIG_NAND_SUPPORT=y
CONFIG_ARCH_64BIT=y
CONFIG_aarch64=y

# ===== 包源配置 =====
CONFIG_PER_FEED_REPO=y
CONFIG_FEED_packages=y
CONFIG_FEED_luci=y
CONFIG_FEED_routing=y
CONFIG_FEED_telephony=y

# ===== 编译优化参数 =====
CONFIG_USE_STRIP=y
CONFIG_USE_SSTRIP=y
CONFIG_STRIP_KERNEL_EXPORTS=y
CONFIG_USE_MKLIBS=y

# 移除调试符号
# CONFIG_NO_STRIP=n
# CONFIG_DEBUG=n

# ===== 固件生成选项 =====
CONFIG_IB=y
CONFIG_SDK=y
CONFIG_IMAGEOPT=y

# 构建后缀
CONFIG_VERSION_DIST="ImmortalWrt"
CONFIG_VERSION_NICK="SL3000-PassWall2"
CONFIG_VERSION_NUMBER=""
CONFIG_VERSION_REPO="https://downloads.immortalwrt.org/releases/21.02.7"

# 镜像生成选项
CONFIG_TARGET_IMAGES_PAD=y
CONFIG_TARGET_KERNEL_PARTSIZE=32
CONFIG_TARGET_ROOTFS_PARTSIZE=512

# 分区布局
CONFIG_TARGET_mediatek_mt7981_DEVICE_sl_3000-emmc_LAYOUT="emmc"
CONFIG_TARGET_KERNEL_PARTSIZE=32
CONFIG_TARGET_ROOTFS_PARTSIZE=512

# 最终构建选项
CONFIG_AUTOREMOVE=y
CONFIG_BUILDBOT=y
